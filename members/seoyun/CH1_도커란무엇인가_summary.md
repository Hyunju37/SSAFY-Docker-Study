# 1. 도커란 무엇인가?

## 도커의 개념

### 도커(Docker)
- 프로그램, 데이터를 각각 독립된 환경에 격리시키는 것(운영체제 통째로)
- 서버 상의 환경을 독립된 환경으로 분리

### 컨테이너, 도커 엔진, 이미지
- 컨테이너(Container)
  - 분리된 독립된 환경
  - 도커는 컨테이너를 다루는 기능을 제공하는 소프트웨어다
  - 컨테이너를 생성하고 구동하기 위해서는 도커 엔진, 이미지가 필요
  - 하나의 도커에서 여러 개의 컨테이너를 만들 수 있음
- 도커 엔진(Docker Engine)
  - 도커 소프트웨어의 본체
  - 컨테이너를 생성하거나 구동시킬 수 있다
- 이미지
  - 컨테이너를 만들기 위해서는 이미지가 필요함
  - 담고 있는 소프트웨어의 종류에 따라 다양한 이미지가 있음
  - ex. 아파치 컨테이너 -> 아파치 이미지 사용, MySQL 컨테이너 -> MySQL 이미지 사용, ...

### 도커와 리눅스
- 도커는 리눅스 운영체제가 필요함
  - Windows, MacOS에서 구동할 때도 내부적으로 리눅스가 사용됨
- 컨테이너에서 동작시킬 프로그램도 리눅스 프로그램

## 도커를 사용하는 이유

### 문제 상황
- 소프트웨어는 단일 프로그램이 아니라 여러 개의 프로그램으로 구성된 경우가 많음
  - 프로그램 하나를 업데이트 하면 다른 프로그램에도 영향을 미치게 됨
- 또한 다른 프로그램과 특정한 폴더 또는 디렉토리를 공유하거나 같은 경로에 설정 정보를 저장하는 경우도 존재
  - 공유하는 대상을 어느 한 쪽만을 위해 수정하면 다른 쪽에서 오류 발생

### 문제 해결
- 도커 컨테이너를 사용해 프로그램을 격리
  - 도커 컨테이너는 다른 컨테이너와 완전히 분리된 환경
  - 즉, 컨테이너 안에 들어있는 프로그램은 다른 프로그램과 격리된 상태가 됨
- 또한 여러 컨테이너에서 같은 프로그램을 실행할 수 있음 (버전이 동일해도 가능)

# 2. 서버와 도커

## 서버의 두 가지 의미

### 서버란?
- 어떤 서비스(service)를 제공(serve)하는 것

### 기능적 의미의 서버와 물리적 의미의 서버
- 기능적 의미의 서버
  - 어떠한 기능을 제공한다는 뜻
  - ex. 웹 서버 -> 웹 기능을 제공, 데이터베이스 서버 -> 데이터베이스 기능을 제공, ...
- 물리적 의미의 서버
  - 데스크탑 컴퓨터와 마찬가지로 어딘가에 물리적으로 존재하는 컴퓨터
- 하나의 물리적 컴퓨터에 여러 개의 기능적 의미의 서버를 함께 둘 수 있다
- 서버 역시 운영체제가 동작하고 그 위에서 소프트웨어가 실행된다

### 서버의 기능
- 서버의 기능은 소프트웨어가 제공
  - ex. 아파치(웹 서버 소프트웨어 설치) -> 웹 서버의 기능을 갖춤
- 여러 소프트웨어를 한 컴퓨터에 설치할 수 있다
  - ex. 웹 서버, 메일 서버, FTP 서버를 한 컴퓨터에서 제공
  - ex2. 시스템 서버와 DB 서버가 함께 동작
  - 즉, 여러 기능적 의미의 서버가 하나의 물리적 컴퓨터에 존재할 수 있다

### 서버의 운영체제
- 물리적 컴퓨터 위에 운영 체제가 동작하며 소프트웨어를 설치한다
- 서버용 운영체제
  - 리눅스 또는 유닉스 계열을 주로 사용
- 서버용 소프트웨어
  - 리눅스용 소프트웨어가 대다수를 차지(리눅스 또는 유닉스 계열)

## 컨테이너를 통한 서버 기능 실행의 장점

### 안전한 서버 운영
- 각 컨테이너는 완전히 독립되어 있으므로 컨테이너 내부의 프로그램들은 완전히 격리됨
- 컨테이너 기술을 이용하면 하나의 물리 서버에 여러 개의 웹 서버를 띄울 수 있음
  - 웹 서버의 기능을 공유해야하는 리스크가 없음
  - (+) 물리 서버의 수를 줄일 수 있음 -> 비용 절감

### 자유로운 이식
- 컨테이너의 정보를 내보내기 한 다음, 다른 도커 엔진에서 복원
  - 도커 엔진 간의 이동이 자유롭다
- 똑같은 상태로 튜닝한 컨테이너를 팀원 전원에게 배포해 모두가 동일한 개발환경을 사용할 수 있음
- 운영체제가 달라도 신경쓰지 않고 컨테이너를 옮길 수 있음
  - 도커를 이용하면 물리적 환경의 차이, 서버 구성의 차이를 무시할 수 있기 때문
  - 운영 서버와 개발 서버의 환경 차이로 인한 문제를 원천적으로 방지

# [참고] 도커와 가상화 기술의 차이

## 도커와 가상화 기술의 차이

### 가상화 기술
- 가상의 물리 서버를 만드는 것
- 물리적인 대상을 소프트웨어(가상)로 대체했다
  - 물리적인 대상: 메인보드, CPU, 메모리 등
  - ex. VirtualBox, VMware
- 실질적으로 물리 서버와 동등한 것이므로 OS도 아무 것이나 설치할 수 있고, 그 위에서 어떤 소프트웨어를 구동해도 무방함

### 도커
- 컨테이너에서 리눅스가 동작하는 것처럼 보이지만 실제로 리눅스가 동작하는 것은 아님
- OS의 기능 중 일부를 호스트 역할을 하는 물리 서버에 맡겨 부담을 덜어놓은 형태
- 컨테이너는 운영 체제의 일부 기능을 호스트 컴퓨터에 의존
  - 물리 서버에도 리눅스 기능이 필요하며, 컨테이너의 내용도 리눅스 운영체제가 될 수 밖에 없다

## 도커와 AWS EC2 차이

### AWS EC2
- EC2 역시 가상화 기술
  - 각각의 인스턴스가 완전히 독립된 컴퓨터처럼 동작함
- but 인스턴스를 배포하는 방법은 도커와 비슷함
  - 인스턴스는 컨테이너와 마찬가지로 AMI라는 이미지로부터 생성

## 도커와 호스팅 서비스

### AWS ECS
- 별도로 가상 서버를 만들지 않아도 컨테이너 이미지를 그대로 실행할 수 있음
