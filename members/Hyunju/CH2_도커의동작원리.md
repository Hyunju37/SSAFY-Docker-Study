### Chap2. 도커의 동작 원리
일반적인 구조
(bottom) 서버 컴퓨터 - 리눅스 운영체제 - 도커 엔진 - 컨테이너들 (top)
모든 컨테이너에는 '리눅스 운영체제 비슷한 무언가'가 들어 있다.

> 도커에서는 컨테이너가 완전히 분리돼 있으므로 밑바탕이 되는 리눅스 운영체제의 주변 부분이 컨테이너 속 프로그램의 명령을 전달받을 수 없다. 따라서 컨테이너 속에 운영체제의 주변 부분이 들어 있어 프로그램의 명령을 전달받고 이를 밑바탕이 되는 커널에 전달하는 구조로 돼 있다

즉 밑에있는 리눅스 운영체제가 위에있는 컨테이너 속 프로그램과 상호작용할 수 없다는 말
도커 컨테이너 안의 '리눅스 운영체제 비슷한 무언가'는 운영체제의 주변부분을 의미함. not kernel. kernel은 밑에있는 걸 가져다 쓴다

도커는 밑바탕에서 리눅스 운영체제가 동작하는 것을 전제로 하는 구조임
즉
도커는 리눅스 컴퓨터에 **독립된 격리 환경**을 만드는 것이며, 리눅스에서만 동작하고, 컨테이너에서 동작할 프로그램도 리눅스용 프로그램이다.

Docker Image는 Docker Container를 만드는 빵틀과 같은 것. (컨테이너의 설계도)
반대로 컨테이너로 이미지를 만들 수도 있다. 애초에 도커 이미지는 최초의 컨테이너로부터 만들어진것

공개된 도커 이미지들이 모아져 있는 곳이 Docker Hub\
오픈소스 코드들이 모아져 있는 GitHub과 유사하다
[Docker Hub URL](https://hub.docker.com)

다양한 리눅스 버전 (주변부분) 을 포함한 이미지들을 찾을 수 있다.\
운영체제 주변부분 x 소프트웨어 버전 다양한 조합

COLUMN **
호스트 컴퓨터와 컨테이너 간 리눅스 버전 차이가 있어도 동작하는데 문제 없다.

**도커 컨테이너의 생애 주기와 데이터 저장**
컨테이너는 쓰고 버리는 일회용품 같은 것\
&rarr; 컨테이너 하나를 업데이트하면서 계속 사용하기보다는 업데이트된 소프트웨어가 들어있는 새로운 컨테이너를 사용하는 것이 좋다.

컨테이너를 만들고 &rarr; 실행하고 &rarr; 종료하고 &rarr; 폐기한다

컨테이너를 폐기한 이후에도 컨테이너 안에 있던 데이터를 유지해야 함.\
&rarr; 보통 도커가 설치된 물리적 서버(호스트)의 디스크(HDD or SSD)를 마운트해 이 디스크에 데이터를 저장한다. 

> 간단히 설명하면 운영체제나 소프트웨어 부분은 컨테이너 형태로 만들었다가 쓰고 버리는 것을 반복, 설정 파일과 데이터는 다른 곳에 저장해두고 같은 것을 계속 사용 

도커의 장점:
1. 독립된 환경을 제공한다 &rarr; 프로그램을 여러 개 띄울 수 있고 똑같은 애플리케이션도 여러 개 띄울 수 있다. 즉 한 대의 물리 서버에 여러 가지 기능을 안전한 상태로 띄울 수 있다.
2. 컨테이너를 이용해 각 소프트웨어를 독립된 환경에 격리하므로 다른 소프트웨어에 영향을 끼치지 않는다. 항상 최신 상태로 소프트웨어를 유지하기 쉬운 구조가 된다.
3. 도커 레지스트리를 통해 이미지를 내려받고 컨테이너를 교체하기 간편하다
4. 이미지를 만들어서 개발 환경을 배포하기 쉽다
5. 커널이 없어 가볍다
6. 서버를 구축하기 쉽다.

도커의 단점:
1. 리눅스용 소프트웨어밖에 지원하지 않는다.
2. 호스트 서버에 문제가 생기면 모든 컨테이너에 영향이 미친다.
3. 도커 엔진에 컨테이너 하나만 사용한다면 오버헤드

도커를 언제 주로 쓰는가
1. 팀원 모두에게 동일한 개발환경을 제공하고자 할 때
2. 새로운 버전의 테스트를 하고자 할 때 - 
3. 동일한 서버가 여러 대 필요한 경우 (컨테이너 밖과 독립된 성질을 이용)
